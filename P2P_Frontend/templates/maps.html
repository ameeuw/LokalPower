
{% extends "base.html" %}
<!-- {% block title %}Dashboard{% endblock %} -->
{% block header %}


{% endblock %}

<div class="wrapper">

    {% block sidebar %}

    <div class="sidebar" data-color="purple">
        <!--
            Tip 1: You can change the color of the sidebar using: data-color="purple | blue | green | orange | red"

            Tip 2: you can also add an image using data-image tag
        -->

        <div class="logo">
            <a href="" class="simple-text">
                Lokal Power
            </a>
        </div>

            <div class="sidebar-wrapper">
                <ul class="nav">
                    <li>
                        <a href="{{ url_for('home') }}">
                            <i class="material-icons">dashboard</i>
                            <p>Ãœbersicht</p>
                        </a>
                    </li>
                    <li
                    {% if type == 'sources' %}
                     class="active"
                    {% endif %}>
                        <a href="{{ url_for('osmaps', type='sources') }}">
                            <i class="material-icons">location_on</i>
                            <p>Verbrauch: Karte</p>
                        </a>
                    </li>
                    <li >
                        <a href="{{ url_for('details', type='sources') }}">
                            <i class="fa fa-share-alt" aria-hidden="true"></i>
                            <p>Verbrauch: Details</p>
                        </a>
                    </li>

                    <li
                    {% if type == 'sinks' %}
                     class="active"
                    {% endif %}>
                        <a href="{{ url_for('osmaps', type='sinks') }}">
                            <i class="material-icons">location_on</i>
                            <p>Produktion: Karte</p>
                        </a>
                    </li>
                    <li >
                        <a href="{{ url_for('details', type='sinks') }}">
                            <i class="fa fa-share-alt" aria-hidden="true"></i>
                            <p>Produktion: Details</p>
                        </a>
                    </li>

                    <li>
                        <a href="{{ url_for('battery') }}">
                            <i class="fa fa-battery-half" aria-hidden="true"></i>
                            <p>PV-Batterie Simulation</p>
                        </a>
                    </li>

                </ul>
            </div>
        </div>

    {% endblock %}



    <div class="main-panel">

        <div class="content-fluid">
            {% block body %}

            <div class="container-fluid">
				<div class="row-fluid" style="height: 720px">
					<div class="col-md-8 well" style="height: 100%;">
                        <div id="map_div" style="height: 100%;"></div>
					</div>

                    <div class="col-md-4" style="height: 100%;">
                        <div class="well" style="height: 100%">
                            {% if type == 'sinks' %}
                            {% include 'sinks_accordion_list.html' %}
                            {% else %}
                            {% include 'sources_accordion_list.html' %}
                            {% endif %}
                        </div>
                    </div>

                </div>
            </div>
            {% endblock %}
        </div>
    </div>

</div>

{% block footer %}
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css"
  integrity="sha512-07I2e+7D8p6he1SIM+1twR5TIrhUQn9+I6yjqD53JQjFiMf8EtC93ty0/5vJTZGF8aAocvHYNEDJajGdNx1IsQ=="
  crossorigin=""/>
<script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet.js"
 integrity="sha512-A7vV8IFfih/D732iSSKi20u/ooOfj/AGehOKq0f4vLT1Zr2Y+RX7C+w8A1gaSasGtRUZpF/NZgzSAu4/Gc41Lg=="
 crossorigin=""></script>
<script src="{{ url_for('static', filename='js/leaflet.curve.js' ) }}"></script>
<script src="{{ url_for('static', filename='js/maps.js' ) }}"></script>

<script>

type = '{{ type }}';
$( document ).ready(function() {
    console.log( "Document ready. Loading map." );

    init_map();

    $.get( "http://127.0.0.1:5000/map_json/"+type, function( data ) {
        build_map(JSON.parse(data));
    });
});
</script>

{% endblock %}

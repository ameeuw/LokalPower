
{% extends "base.html" %}
<!-- {% block title %}Dashboard{% endblock %} -->
{% block header %}



{% endblock %}

<div class="wrapper">

    {% block sidebar %}

    <div class="sidebar" data-color="purple" data-image="../assets/img/sidebar-1.jpg">
        <!--
            Tip 1: You can change the color of the sidebar using: data-color="purple | blue | green | orange | red"

            Tip 2: you can also add an image using data-image tag
        -->

        <div class="logo">
            <a href="" class="simple-text">
                Lokal Power
            </a>
        </div>

            <div class="sidebar-wrapper">
                <ul class="nav">
                    <li>
                        <a href="{{ url_for('home') }}">
                            <i class="material-icons">dashboard</i>
                            <p>Ãœbersicht</p>
                        </a>
                    </li>
                    <li
                    {% if type == 'sources' %}
                     class="active"
                    {% endif %}>
                        <a href="{{ url_for('osmaps', type='sources') }}">
                            <i class="material-icons">location_on</i>
                            <p>Verbrauch: Karte</p>
                        </a>
                    </li>
                    <li >
                        <a href="{{ url_for('details', type='sources') }}">
                            <i class="fa fa-share-alt" aria-hidden="true"></i>
                            <p>Verbrauch: Details</p>
                        </a>
                    </li>

                    <li
                    {% if type == 'sinks' %}
                     class="active"
                    {% endif %}>
                        <a href="{{ url_for('osmaps', type='sinks') }}">
                            <i class="material-icons">location_off</i>
                            <p>Produktion: Karte</p>
                        </a>
                    </li>
                    <li >
                        <a href="{{ url_for('details', type='sinks') }}">
                            <i class="fa fa-share-alt" aria-hidden="true"></i>
                            <p>Produktion: Details</p>
                        </a>
                    </li>

                    <li>
                        <a href="{{ url_for('battery') }}">
                            <i class="fa fa-battery-half" aria-hidden="true"></i>
                            <p>PV-Batteriesimulator</p>
                        </a>
                    </li>

                </ul>
            </div>
        </div>

    {% endblock %}



    <div class="main-panel">

        <div class="content-fluid">
            {% block body %}

            <div class="container-fluid">
				<div class="row embed-responsive embed-responsive-16by9" style="">
					<div class="col-md-8 embed-responsive-item" style="width: 65%;">
                        {% if type == 'sinks' %}
                        <iframe class="well" src="{{ url_for('sinks_maps') }}" style="left: 2%; width: 96%; height: 75%"></iframe>
                        {% else %}
                        <iframe class="well" src="{{ url_for('sources_maps') }}" style="left: 2%; width: 96%; height: 75%"></iframe>
                        {% endif %}
					</div>

                    <div class="col-md-4 embed-responsive-item" style="left: 65%; max-width: 35%; height: 77.5%">
                        <div class="well" style="height: 100%">
                            {% if type == 'sinks' %}
                            {% include 'sinks_accordion_list.html' %}
                            {% else %}
                            {% include 'sources_accordion_list.html' %}
                            {% endif %}
                        </div>
                    </div>

                </div>
            </div>
            {% endblock %}
        </div>
    </div>

</div>

{% block footer %}
<script>
// reload the iframe each time
document.getElementsByTagName('iframe')[0].src=document.getElementsByTagName('iframe')[0].src

Highcharts.chart('pie_chart', {
    chart: {
        plotBackgroundColor: null,
        plotBorderWidth: null,
        plotShadow: false,
        type: 'pie'
    },
    title: {
        text: 'Anteile der LokalPower Supplier:'
    },
    tooltip: {
        pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
    },
    plotOptions: {
        pie: {
            allowPointSelect: true,
            cursor: 'pointer',
            dataLabels: {
                enabled: false,
                name: 'Anteile',
                format: '<b>{point.name}</b>: {point.percentage:.1f} %',
                style: {
                    color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                }
            }
        }
    },
    series: [{
        name: 'Shares by Source',
        colorByPoint: true,
        data: [
                {% for k in kWh_SharesBySource %}
                {
                    name: '{{ descriptions[producerNames[loop.index0]]['NAME'] }}',
                    y: {{k}}
                },
                {% endfor %}
        ]
    }]
});
</script>
{% endblock %}
